<!DOCTYPE html>
<html><head><title>Titlebar Icons</title>
<!--
// Copyright (C) 2020 by Henry Kroll, thenerdshow.com
/* Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
   http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. */ //-->
<!-- why crossorigin=""?
https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin
//-->
  <script crossorigin="" src="https://thenerdshow.com/js/prefixfree.min.js"></script>
  <script crossorigin="" src="https://thenerdshow.com/js/prefixfree.dynamic-dom.min.js"></script>

  <link crossorigin="" rel="stylesheet" href="https://thenerdshow.com/css/github.css">
  <script crossorigin="" src="https://thenerdshow.com/js/highlight.pack.js"></script>
  <script>
  hljs.initHighlightingOnLoad();
  </script>
  
  <script>
  //todo: move these convenience functions to kickass.js
  function htmlEntities(str) {
    return String(str).replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;');
  }
  function echo(qs){
    document.write(document.querySelector(qs).innerHTML);
  }
  function echoCode(qs, type){
    var t = htmlEntities(document.querySelector(qs).outerHTML);
    document.write("<pre><code class="+type+">  ", t, "\n</code></pre>");
  }
  </script>
  <style id="widgetStyles">
  .widget {
    position: relative;
    display: inline-block;
    background-color: #f1f1f1;
    text-align: center;
    border: 1px solid #888;
    border-radius:5px;
    padding:5px;
  }
  .widget:hover {
    box-shadow: 5px 10px 8px #222;
  }
  </style>
  <style>
  pre {
    display: inline-block;
  }
  code {
    margin: auto;
    
    border: 1px solid black;
  }
  html body {
    background: #b86;
    height: 100%;
  }
  </style>
  
  <script id="addIcon">
  /** useIcons | use google icons */
  function useIcons(){
    if (!document.querySelector("#googleicons")) {
      var lnk = document.createElement("link");
      lnk.rel = "stylesheet";
      lnk.id = "googleicons";
      lnk.href = "https://fonts.googleapis.com/icon?family=Material+Icons";
      document.querySelector("head").appendChild(lnk);
  } }
  /** addIcon | Attach a clickable icon to an element.
   *  @param {string} iname   - The name of the icon
   *  @param {string} style   - Style info. "right:10px;font-size:60px;"
   *  @param {string} ele     - Query selector of element to receive the icon.
   *  @param {Object} cb      - Callback function to receive click events.
   */
  function addIcon(iname, style, ele, cb){
    useIcons();
    var icon = document.createElement("i");
    icon.classList.add("material-icons");
    icon.style = "position:absolute;cursor:pointer;" + style;
    icon.innerHTML = iname;
    ele.appendChild(icon);
    if (icon.addEventListener) icon.addEventListener("click", cb);
    else icon.attachEvent("click", cb);
  }
  </script>

  <script id="titleIcons">
    /** create some titlebar icons */
    function titleIcons(e){
      t = document.querySelector(e);
      iconStyles = document.querySelector("#iconStyles");
      //create stylesheet if necessary
      if(!iconStyles){
        style=document.createElement("style");
        style.id = "iconStyles";
        style.innerHTML = `  .minimized {
          height: 65px;
          width: 65px !important;
          overflow: hidden;
          padding: 0;
          cursor: pointer;
        }
        .maximized {
          position: fixed;
          z-index: 99;
          width:  100% !important;
          height: 100%;
          top: 0; left: 0;
          padding: 0;
        }`;
        document.querySelector("head").appendChild(style);
      }
      //minimize
      addIcon("minimize", "right:40px;top:0px;", t, function(e){
        pe = e.target.parentElement;
        icons = pe.querySelectorAll(".material-icons");
        //do minimize
        pe.classList.add("minimized");
        pe.classList.remove("maximized");
        icons.forEach(el=>{
          el.style.display="none";
        });
        //enable un-minimize
        pe.addEventListener("mouseup", function(e){
          pe.classList.remove("minimized");
          icons.forEach(el=>el.style.display="");
          e.stopPropagation();
        });
        e.stopPropagation();
      });
      //maximize
      addIcon("web_asset", "right:20px;top:0px;", t, function(e){
        pe = e.target.parentElement;
        var rect = pe.getBoundingClientRect();
        if (pe.classList.contains("maximized")) {
          pe.classList.remove("maximized");
        } else {
          pe.classList.add("maximized");
          pe.classList.remove("minimized");
        }
      });
      //close
      addIcon("close", "right:0px;top:0px;", t, function(e){
        e.target.parentElement.remove();
      });
    }
  </script>
</head>
<body>


  <h1>Kickass JS</h1>
  
  <p>A javascript widget library collection released under the Apache public license. Use only what is necessary for fast page loads, simplicity, and convenience. Download updated modules from <a href=
"https://github.com/themanyone/kickass">GitHub</a>. </p>
  
  <h2><script>echo("title");</script> 
  <i class="material-icons">minimize</i>
  <i class="material-icons">restore</i>
  <i class="material-icons">close</i>
  <i class="material-icons">computer</i>
  <i class="material-icons">traffic</i></h2>

<p>This tutorial walks through the steps of adding <a href= "https://www.w3schools.com/icons/icons_reference.asp">Google Icons</a> to a <i>widget</i>, or any element for that matter. A widget is like a minature application or form that users interact with. We can improve the user experience by making our widgets look and behave like windows. First, we will create a generic function to add an icon. Then we will make another function to add <i>titlebar icons</i> (the minimize, maximize, and close buttons) to a widget.</p>

<p>Here's a test widget before and after adding titlebar icons.</p>

  <div id="" class="widget" style="width: 300px">
    <h1 id="output">Test Widget</h1>

    <label>Name:</label><input id="name" type="text"></input>
    <button onclick="doClick(this.parentElement)">Enter</button>
  </div>

  <div id="test" class="widget" style="display: inline-block; width: 300px">
    <script>
      function doClick(e){
        var name = e.querySelector("#name");
        var output = e.querySelector("#output");
        output.innerHTML = "Hi " + name.value;
      }
    </script>
    <h1 id="output">Test Widget</h1>

    <label>Name:</label><input id="name" type="text"></input>
    <button onclick="doClick(this.parentElement)">Enter</button>
  </div>
  
<p>Here's an example charting widget with titlebar icons added.</p>

<div id="chart" class="widget" style="width: 500px"><br>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div id="tradingview_710b8"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/NASDAQ-AAPL/" rel="noopener" target="_blank"><span class="blue-text">AAPL Chart</span></a> by TradingView</div>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
  new TradingView.widget(
  {
  "width": 500,
  "height": 300,
  "symbol": "NASDAQ:AAPL",
  "interval": "D",
  "timezone": "Etc/UTC",
  "theme": "light",
  "style": "1",
  "locale": "en",
  "toolbar_bg": "#f1f3f6",
  "enable_publishing": false,
  "allow_symbol_change": true,
  "container_id": "tradingview_710b8"
}
  );
  </script>
</div>
<!-- TradingView Widget END -->
</div>
  
  <h2>The Code</h2>

<p>To create the above widgets, we needed some basic styles. Put these inside the <b>&lt;head&gt;</b> section of the web page.</p>

  <!-- Code Block -->
  <script>echoCode("#widgetStyles", "css");</script>

  
<p>The test widget is just a plain <b>&lt;div&gt;</b> element with text input and a handler function. Add this to the <b>&lt;body&gt;</b> section of the web page.</p>

  <!-- Code Block -->
  <script>echoCode("#test", "html");</script>
  
<p>Now let's create an <b>addIcon</b>() Javascript function to add an icon to any widget. First we have to initialize Google icons. That is done with the <b>useIcons</b>() function. It makes sure to only add the <a href= "https://www.w3schools.com/icons/icons_reference.asp">Google Icons</a> code to the page once.</p>

  <!-- Code Block -->
  <script>echoCode("#addIcon", "html");</script>
  
<p>The <b>addIcon</b>() function first calls <b>useIcons</b>() to initialize the icons. Then it creates an icon element with the name we give it. It uses style informaiton to place the icon wherever we want it in the widget. Using this code, we can write another function to add all three titlebar icons.</p>

  <script id="addTitleIcons">
    titleIcons("#test");
    titleIcons("#chart");
  </script>

  <!-- Code Block -->
  <script>echoCode("#titleIcons", "html");</script>
  
<p>The <b>titleIcons</b>() script uses <b>addIcon</b>() to add the three icons, maximize, minimize, and close. It takes care to add the necessary styles first. Then it calls <b>addIcon</b>() three times, once for each titlebar icon. All we have to do is tell it the icon name, some style info saying where to put the icon, in this case in the top-right of the widget, the widget to add icons to, and an event handler callback function. The event handlers change Styles depending on which icon was clicked</p>

<h2>Wrapping Up</h2>
  
<p>That's it. We created some widgets on a web page. We wrote a script to put an icon on them. Then we made another script to add the titlebar icons. From now on, we don't need to cut and paste all these scripts into a page. We can simply include them like this.</p>

<pre><code>&lt;script src="titleIcons.js"&gt;&lt;/script&gt;</code></pre>

<p>Finally, we get to call our <b>titleIcons</b>() function. All we have to do is give it the <a href="https://www.w3schools.com/cssref/css_selectors.asp">css selectors</a> of the widgets we want to add title icons to. In this case, the ids are #test and #chart.</p>
  
  <script>echoCode("#addTitleIcons", "html");</script>

</body></html>
