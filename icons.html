<!DOCTYPE html>
<html><head><title>Widget Icons</title>
<!--
// Copyright (C) 2020 by Henry Kroll, thenerdshow.com
/* Licensed under the Apache License, Version 2.0 (the "License");
you may not use this file except in compliance with the License.
You may obtain a copy of the License at
   http://www.apache.org/licenses/LICENSE-2.0
Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an "AS IS" BASIS,
WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
See the License for the specific language governing permissions and
limitations under the License. */ //-->
<!-- why crossorigin=""?
https://developer.mozilla.org/en-US/docs/Web/HTML/Attributes/crossorigin
//-->
  <script crossorigin="" src="https://thenerdshow.com/js/prefixfree.min.js"></script>
  <script crossorigin="" src="https://thenerdshow.com/js/prefixfree.dynamic-dom.min.js"></script>

  <link crossorigin="" rel="stylesheet" href="https://thenerdshow.com/css/github.css">
  <script crossorigin="" src="https://thenerdshow.com/js/highlight.pack.js"></script>
  <script>
  hljs.initHighlightingOnLoad();
  </script>
  
  <script src="kickass.js"></script>
  
  <style id="widgetStyles">
  .widget {
    position: relative;
    display: inline-block;
    background-color: #f1f1f1;
    text-align: center;
    border: 1px solid #888;
    border-radius:5px;
    padding:5px;
  }
  .widget:hover {
    box-shadow: 5px 10px 8px #222;
  }
  </style>

<link rel="stylesheet" href="kickass.css">
  
  <script id="addIcon">
  /** useIcons | use google icons */
  function useIcons(){
    if (!document.querySelector("#googleicons")) {
      var lnk = document.createElement("link");
      lnk.rel = "stylesheet";
      lnk.id = "googleicons";
      lnk.href = "https://fonts.googleapis.com/icon?family=Material+Icons";
      document.querySelector("head").appendChild(lnk);
  } }
  /** addIcon | Attach a clickable icon to an element.
   *  @param {string} iname   - The name of the icon
   *  @param {string} style   - Style info. "right:10px;font-size:60px;"
   *  @param {string} qs      - Query selector of element to receive the icon.
   *  @param {Object} cb      - Callback function to receive click events.
   */
  function addIcon(iname, style, qs, cb){
    useIcons();
    var icon = document.createElement("i"), ele = document.querySelector(qs);
    icon.classList.add("material-icons");
    icon.style = "position:absolute;cursor:pointer;" + style;
    icon.innerHTML = iname;
    ele.appendChild(icon);
    if (icon.addEventListener) icon.addEventListener("click", cb);
    else icon.attachEvent("click", cb);
  }
  </script>

  <script id="titleIcons">
    /** create some titlebar icons */
    function titleIcons(iname, qs){
      iconStyles = document.querySelector("#iconStyles");
      //create stylesheet if necessary
      if(!iconStyles){
        style=document.createElement("style");
        style.id = "iconStyles";
        style.innerHTML = `  .minimized {
          height: 65px;
          width: 65px !important;
          overflow: hidden;
          padding: 0;
          cursor: pointer;
        }
        .maximized {
          position: fixed;
          z-index: 99;
          width:  100% !important;
          height: 100%;
          top: 0; left: 0;
          padding: 0;
        }`;
        document.querySelector("head").appendChild(style);
      }
      //friendly icon
      addIcon(iname, "left:1px; top:0", qs);
      //minimize
      addIcon("minimize", "right:40px;top:0px;", qs, function(e){
        pe = e.target.parentElement;
        icons = pe.querySelectorAll(".material-icons");
        //do minimize
        pe.classList.add("minimized");
        pe.classList.remove("maximized");
        icons.forEach(el=>{
          el.style.display="none";
        });
        //enable un-minimize
        pe.addEventListener("mouseup", function(e){
          pe.classList.remove("minimized");
          icons.forEach(el=>el.style.display="");
          e.stopPropagation();
        });
        e.stopPropagation();
      });
      //maximize
      addIcon("web_asset", "right:20px;top:0px;", qs, function(e){
        pe = e.target.parentElement;
        var rect = pe.getBoundingClientRect();
        if (pe.classList.contains("maximized")) {
          pe.classList.remove("maximized");
        } else {
          pe.classList.add("maximized");
          pe.classList.remove("minimized");
        }
      });
      //close
      addIcon("close", "right:0px;top:0px;", qs, function(e){
        e.target.parentElement.remove();
      });
    }
  </script>
</head>



<body>
  <iframe id="about" width="100%" scrolling="no" src="about.html" 
  seamless="seamless"></iframe>
  
  <h2><script>_echo("title");</script> 
  <i class="material-icons">minimize</i>
  <i class="material-icons">restore</i>
  <i class="material-icons">close</i>
  <i class="material-icons">computer</i>
  <i class="material-icons">traffic</i></h2>

<p>This tutorial walks through the steps of creating widgets and adding icons to them.</p>

  <div id="" class="widget" style="width: 300px">
    <h1 id="output">A Plain Widget</h1>

    <label>Name:</label><input type="text"></input>
    <button onclick="doClick(this.parentElement)">Enter</button>
  </div>

  <div id="test" class="widget" style="display: inline-block; width: 300px">
    <script>
      function doClick(e){
        var name = e.querySelector("input");
        var output = e.querySelector("#output");
        output.innerHTML = "Hi " + name.value;
      }
    </script>
    <h1 id="output">Widget With Icons</h1>

    <label>Name:</label><input type="text"></input>
    <button onclick="doClick(this.parentElement)">Enter</button>
  </div>

<p>You can skip the tutorial and go right to using the icons library to add titlebar icons to a widget.</p>

<p>First, include <b>icons.js</b> on the page</p>


<pre><code>&lt;script type="module" src="kickass/icons.js"&gt;&lt;/script&gt;</code></pre>

<p>Then, at the bottom of the page, or in a load event handler, put some Javascript to attach titlebar icons to a widget named "my_widget_id" with a happy face in the top-left corner.</p>

<pre><code>&lt;script&gt;titleIcons("sentiment_very_satisfied", "#my_widget_id");&lt;/script&gt;</code></pre>

<hr>

<h2>Tutorial</h2>

<p>Widgets are minature applications or forms that users interact with. We can use <a href= "https://www.w3schools.com/icons/icons_reference.asp">Google Icons</a> to make widgets look and behave like little windows. First, we will create a generic function to add an icon. Then we will make another function that uses it to add <i>titlebar icons</i> (minimize, maximize, and close buttons) to a widget.</p>
  
<p>Here's an example charting widget with titlebar icons.</p>

<div id="chart" class="widget" style="width: 500px"><br>
<!-- TradingView Widget BEGIN -->
<div class="tradingview-widget-container">
  <div id="tradingview_710b8"></div>
  <div class="tradingview-widget-copyright"><a href="https://www.tradingview.com/symbols/NASDAQ-AAPL/" rel="noopener" target="_blank"><span class="blue-text">AAPL Chart</span></a> by TradingView</div>
  <script type="text/javascript" src="https://s3.tradingview.com/tv.js"></script>
  <script type="text/javascript">
  new TradingView.widget(
  {
  "width": 500,
  "height": 300,
  "symbol": "NASDAQ:AAPL",
  "interval": "D",
  "timezone": "Etc/UTC",
  "theme": "light",
  "style": "1",
  "locale": "en",
  "toolbar_bg": "#f1f3f6",
  "enable_publishing": false,
  "allow_symbol_change": true,
  "container_id": "tradingview_710b8"
}
  );
  </script>
</div>
<!-- TradingView Widget END -->
</div>
  
  <h2>The Code</h2>

<p>To set our widgets apart from the pasge, we need some basic styles. Put these styles inside the <b>&lt;head&gt;</b> section of the web page to override default widget styles loaded by our scripts. Relative positioning is necessary so the icons can use absolute positioning within the element. We can change widgets to absolute positioning later to move them around. Display: inline-block allows us to place widgets side by side. And of course some padding separates them from the rest of the page content.</p>

  <!-- Code Block -->
  <script>echoCode("#widgetStyles", "css");</script>

  
<p>The test widget is just a plain <b>&lt;div&gt;</b> element with text input and a handler function. Add this HTML code to the <b>&lt;body&gt;</b> section of the web page.</p>

  <!-- Code Block -->
  <script>echoCode("#test", "html");</script>
  
<p>Now let's create an <b>addIcon</b>() Javascript function to attach an icon to any widget. First, we write a function to initialize Google icons, but <b>addIcon</b>() will take care of calling it automatically.</p>

  <!-- Code Block -->
  <script>echoCode("#addIcon", "html");</script>
  
<p>The <b>addIcon</b>() function first calls <b>useIcons</b>() to initialize the icons. Then it creates an icon element with the name we give it. It uses style informaiton to place the icon wherever we want it within the widget. Using this code, we can write another function to add all three titlebar icons.</p>

  <script id="addTitleIcons">
    titleIcons("person_outline", "#test");
    titleIcons("trending_up", "#chart");
  </script>

  <!-- Code Block -->
  <script>echoCode("#titleIcons", "html");</script>
  
<p>The <b>titleIcons</b>() script takes an icon name for the top-left corner as its first argument. The second argument is the <a href="https://www.w3schools.com/cssref/css_selectors.asp">CSS selector</a> of the element to add the titlebar icons to. It calls <b>addIcon</b>() three times to add the three icons, maximize, minimize, and close. It takes care to insert the necessary styles first. All <b>addIcon</b>() requires is the icon name, some style info saying where to put the icon, in this case in the top-right of the widget, the widget to add icons to, and an event handler or callback function. The event handler changes Styles to maximize or minimize the window depending on which icon is clicked.</p>

<h2>Wrapping Up</h2>
  
<p>That's it. We created some widget windows on a web page. We wrote a script to put an icon on them. Then we made another script to add the titlebar icons. We transferred the scripts from this page into a separate javascript file, named "titleIcons." That way, we don't have to cut and paste all these scripts into every page where they are required. We can simply include them like this.</p>

<pre><code>&lt;script type="module" src="kickass/icons.js"&gt;&lt;/script&gt;</code></pre>

<p>Then call the <b>titleIcons</b>() function. All that is required is give it the name of the <a href= "https://www.w3schools.com/icons/icons_reference.asp">Google Icon</a> and the <a href="https://www.w3schools.com/cssref/css_selectors.asp">CSS selector</a> of the widget we want to add title icons to. In this case, the ids are #test and #chart.</p>
  
  <script>echoCode("#addTitleIcons", "html");</script>

</body></html>
